const SigtapFarmacos={API_URL:"https://sigtap.gtmedics.com",Toast:Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2500,timerProgressBar:!0,width:"300px",customClass:{popup:"text-xs rounded-xl shadow-lg",title:"text-xs font-semibold"}}),async carregarCompleto(e,t=["lme1","lme2","lme3"]){let o="";e&&(o=e.innerHTML,e.disabled=!0,e.innerHTML=`
                <svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span>Baixando...</span>`);try{let i=await fetch(`${this.API_URL}/farmacos_lme/lista_simples`),n=await i.json(),s=['<option value="">Selecione um medicamento...</option>'];n.forEach(e=>{s.push(`<option value="${e.value}">${e.label}</option>`)});let a=s.join("");t.forEach(e=>{let t=document.getElementById(e);t&&(t.innerHTML=a)}),this.Toast.fire({icon:"success",title:`${n.length} medicamentos carregados!`})}catch(r){console.error("Erro:",r),this.Toast.fire({icon:"error",title:"Erro ao carregar lista."})}finally{e&&(e.disabled=!1,e.innerHTML=o)}},initSearch(e){let t=this;return new TomSelect(e,{valueField:"codigo",labelField:"nome",searchField:["nome","codigo"],load:function(e,o){if(e.length<3)return o();fetch(`${t.API_URL}/farmacos_lme?q=${encodeURIComponent(e)}`).then(e=>e.json()).then(e=>{if(e.detail)return o();o(e)}).catch(()=>o())},render:{option:function(e,t){return`<div class="py-2 px-2 border-b border-gray-50 hover:bg-gray-50">
                        <div class="text-slate-700 text-sm font-medium truncate">${t(e.nome)}</div>
                    </div>`},item:function(e,t){return`<div class="flex gap-2 items-center">
                        <span class="truncate">${t(e.nome)}</span>
                    </div>`}},onChange:function(e){let o=this.options[e],i=document.getElementById("resultado-selecao"),n=document.getElementById("texto-selecionado");e&&o?(i.classList.remove("hidden"),n.innerHTML=o.nome,t.Toast.fire({icon:"success",title:"Medicamento selecionado!"})):i.classList.add("hidden")},placeholder:"Digite nome ou c\xf3digo (min. 3 letras)...",plugins:["remove_button"],maxOptions:50})}};